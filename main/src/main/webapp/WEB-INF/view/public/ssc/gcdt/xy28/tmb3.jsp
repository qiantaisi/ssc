<%@ page trimDirectiveWhitespaces="true" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ page import="project38.api.utils.RequestUtils" %>
<%
    String basePath = RequestUtils.getBasePath(request);
%>
<div class="lot-content clearfix">
    <div class="fl main-left">
        <div class="table-common cl-100">
            <table width="100%" border="1">
                <thead>
                <tr>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th width="47">勾选</th>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th width="47">勾选</th>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th width="47">勾选</th>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th width="47">勾选</th>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th width="47">勾选</th>
                </tr>
                </thead>

                <tbody>
                <tr>
                    <td><span class="ball-28xyicon grayxy28">0</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="0" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon greenxy28">1</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="1" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon bluexy28">2</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="2" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon ball-28xy3">3</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="3" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon greenxy28">4</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="4" data-plid="14407"/></td>
                </tr>

                <tr>
                    <td><span class="ball-28xyicon bluexy28">5</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="5" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon ball-28xy6">6</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="6" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon greenxy28">7</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="7" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon bluexy28">8</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="8" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon ball-28xy9">9</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="9" data-plid="14407"/></td>
                </tr>

                <tr>
                    <td><span class="ball-28xyicon greenxy28">10</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="10" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon bluexy28">11</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="11" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon ball-28xy12">12</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="12" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon grayxy28">13</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="13" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon grayxy28">14</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="14" data-plid="14407"/></td>
                </tr>

                <tr>
                    <td><span class="ball-28xyicon ball-28xy15">15</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="15" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon greenxy28">16</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="16" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon bluexy28">17</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="17" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon ball-28xy18">18</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name=18 data-plid="14407"/></td>

                    <td><span class="ball-28xyicon greenxy28">19</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="19" data-plid="14407"/></td>

                <tr>
                    <td><span class="ball-28xyicon bluexy28">20</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="20" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon ball-28xy21">21</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="21" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon greenxy28">22</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="22" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon bluexy28">23</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="23" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon ball-28xy24">24</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="24" data-plid="14407"/></td>
                </tr>

                <tr>
                    <td><span class="ball-28xyicon greenxy28">25</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="25" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon bluexy28">26</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="26" data-plid="14407"/></td>

                    <td><span class="ball-28xyicon grayxy27">27</span></td>
                    <td><strong class="color-red color-333 pl" data-plid="14407"></strong></td>
                    <td><input type="checkbox" data-name="26" data-plid="14407"/></td>

                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>

                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                
                </tbody>

                <tfoot>
                <tr>
                    <td colspan="15">
                        <c:import url="../common/toptouzhu.jsp">
                            <c:param name="flagGroup" value="11"/>
                            <c:param name="navGroup" value="2"/>
                        </c:import>
                    </td>
                </tr>
                </tfoot>
            </table>
        </div>

        <div class="btns">
            <button type="submit" class="btn btn-1">提交</button>
            <button class="btn btn-2">重设</button>
        </div>

        <c:import url="common/bottom_zs.jsp"/>
    </div>
    <div class="fr main-right"></div>
</div>

<input type="hidden" data-plid="14407" id="pl"/>
<c:import url="../common/subPageCommonJs.jsp"/>
<script>
    function refreshYzm(obj) {
        var src = $(obj).attr("src");
        var params = getRequest(src);

        src = "<%=basePath%>code/yzm?timestamp=" + (new Date()).getTime();
        $.each(params, function (index, value) {
            src += '&' + value.key + '=' + value.value;
        });
        $(obj).attr("src", src);
    }

    function registerLogin() {
        var loginAccount = $.trim($("#registerLoginAccount").val());
        var loginPassword = $.trim($("#registerLoginPassword").val());
        var yzm = $.trim($("#registerLoginYzm").val());

        if (!loginAccount) {
            alert("请输入账号");
            return;
        }
        if (!loginPassword) {
            alert("请输入密码");
            return;
        }
        if (!yzm) {
            alert("请输入验证码");
            return;
        }

        ajaxRequest({
            url: "<%=basePath%>member/ajaxLogin.json",
            data: {
                yzm: yzm,
                account: loginAccount,
                password: $.md5(loginPassword)
            },
            beforeSend: function () {
                showLoading();
            },
            success: function (json) {
                if (json.result == 1) {
                    $.cookie("uid", json.userId, {path: "/"});
                    $.cookie("token", json.token, {path: "/"});
                    parent.getUserSession();
                    $(".alert_log .alert_log_col h5 i").trigger("click");
                    $("#bottomInfo .tabs ul li:first").trigger("click");
                } else {
                    refreshYzm(document.getElementById('registerYzmImg2'));
                    Tools.toast("登录失败：" + json.description);
                }
                hideLoading();
            }
        });
    }

    function showLoading() {
        layer.load(2, {
            shade: [0.1, '#000'] //0.1透明度的白色背景
        })
    }
    function hideLoading() {
        layer.closeAll();
    }
    function refreshYzm(obj) {
        var src = $(obj).attr("src");
        var params = getRequest(src);

        src = "<%=basePath%>code/yzm?timestamp=" + (new Date()).getTime();
        $.each(params, function (index, value) {
            src += '&' + value.key + '=' + value.value;
        });
        $(obj).attr("src", src);
    }
    $(window).resize(function () {
        ate();
    });

    function ate() {
        var hei = $(window).height();
        $(".back").css("height", hei - 27 + "px");
    }

    $(function () {
        parent.getUserSession();
    });
</script>
<script>
    var playGroupId = 7;
    var playId = 658;
    var playGroupName = '特码包三';

    function getZhudan() {
        var strArr = [];
        var betForm = {
            totalMoney: 0,
            sscBetList: [],
            totalZhushu: 0
        };

        var arr = [];
        $(".main-left .table-common input").each(function () {
            if ($(this).is(":checked")) {
                arr.push($(this).data("name"));
            }
        });
        if (arr.length < 3) {
            Tools.toast("至少选择3个号码");
            return;
        }

        var tmpArr = getFlagArrs(arr, 3);
        $.each(tmpArr, function (index, value) {
            var arr = value.split(" ");
            var maxSum = 0;
            var minSum = 0;
            var sum1 = parseInt(arr[0]);
            var sum2 = parseInt(arr[1]);
            var sum3 = parseInt(arr[2]);

            if (sum1 != sum2 && sum1 != sum3 && sum2 != sum3) {
                maxSum = sum1 > sum2 ? (sum1 > sum3 ? sum1 : sum3) : (sum2 > sum3 ? sum2 : sum3);
                minSum = sum1 < sum2 ? (sum1 < sum3 ? sum1 : sum3) : (sum2 < sum3 ? sum2 : sum3);

                if (sum1 > minSum && sum1 < maxSum) {
                    strArr.push(minSum + '-' + sum1 + '-' + maxSum);
                } else if (sum2 > minSum && sum2 < maxSum) {
                    strArr.push(minSum + '-' + sum2 + '-' + maxSum);
                } else if (sum3 > minSum && sum3 < maxSum) {
                    strArr.push(minSum + '-' + sum3 + '-' + maxSum);
                }
            }

        });

        strArr = strArr.uniqueArr();

        var inputMoney = $("#inputMoney").val();
        if (typeof inputMoney == 'undefined' || !inputMoney) {
            Tools.toast("请输入正确的金额");
            return;
        }

        $.each(strArr, function (index, value) {
            betForm.sscBetList.push({
                playGroupName: playGroupName,
                playGroupId: playGroupId,
                number: $("#number").data("number"),
                playId: playId,
                zhushu: 1,
                perMoney: inputMoney,
                content: value.split('-').join(","),
                playPlId: $("#pl").data("plid"),
                playPl: $("#pl").data("pl")
            });
            betForm.totalMoney = add(betForm.totalMoney, inputMoney);
            betForm.totalZhushu = add(betForm.totalZhushu, 1);
        });

        return betForm;
    }

    function checkZhudan() {
        return true;
    }

    //去掉数组重复
    Array.prototype.uniqueArr = function () {
        var temp = new Array();
        this.sort();
        for(i = 0; i < this.length; i++) {
            if( this[i] == this[i+1]) {
                continue;
            }
            temp[temp.length]=this[i];
        }
        return temp;
    };
</script>